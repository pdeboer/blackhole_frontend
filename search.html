<!DOCTYPE html>
<html lang="en">

    <head>

        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <meta name="author" content="">

        <title>Search for recoil Blackholes</title>

        <!-- Bootstrap Core CSS -->
        <link href="css/bootstrap.min.css" rel="stylesheet">

        <!-- Custom CSS -->
        <link href="css/main.css" rel="stylesheet">

        <!-- Fonts -->
        <link href="http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="http://fonts.googleapis.com/css?family=Josefin+Slab:100,300,400,600,700,100italic,300italic,400italic,600italic,700italic" rel="stylesheet" type="text/css">

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="js/angular.js"></script>
        <script>
            var app = angular.module('search', [])
            app.controller('mainSearch', function ($scope, $http) {
                $http.get("http://localhost:9000/coordinates").
                        success(function (data, status, headers, config) {
                            $scope.coordinates = data;
                            $scope.uri = "http://skyservice.pha.jhu.edu/DR10/ImgCutout/getjpeg.aspx?ra=" + data.ra + "&dec=" + data.dec + "&scale=0.050806&width=1536&height=1536&opt=";

                        }).
                        error(function (data, status, headers, config) {
                            alert("error");
                            // called asynchronously if an error occurs
                            // or server returns response with an error status.
                        });
                        
                         });
                        
                        app.controller('ExampleController', ['$scope', function( $scope, $http, $state) {

      
      $scope.submit = function() {
	  	$http({
	  		url: 'http://localhost:9000/tasklog', 
	  		method: 'POST',
	  		data: {"uuid": "f4957a2c-921d-4cd0-9634-a9da89c9c3ef", "coordinates_id": 1, "question_id": 1, "answer": "yes", "ip": "77.57.13.24"}
    	}).then(function(response) {
			alert(response);
		}, function(error) {
	 		alert(error.data);
    	});
  	}

    }]);    

            
            
  


                                  
        </script>
    </head>

    <body>

        <div class="brand">Search for recoil blackholes</div>
        <div class="address-bar">Help us find new interesting new blackholes</div>

        <!-- Navigation -->
        <nav class="navbar navbar-default" role="navigation">
            <div class="container">
                <!-- Brand and toggle get grouped for better mobile display -->
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <!-- navbar-brand is hidden on larger screens, but visible when the menu is collapsed -->
                    <a class="navbar-brand" href="index.html">Search for recoil Blackholes</a>
                </div>
                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav">
                        <li>
                            <a href="index.html">Home</a>
                        </li>
                        <li>
                            <a href="register.html">Register</a>
                        </li>
                        <li>
                            <a class="nav-active" href="search.html">Start Searching</a>
                        </li>
                        <li>
                            <a href="about.html">About</a>
                        </li>
                        <li>
                            <a href="contact.html">Contact</a>
                        </li>
                    </ul>
                </div>
                <!-- /.navbar-collapse -->
            </div>
            <!-- /.container -->
        </nav>

        <div class="container">

            <div class="row">
                <div class="box">
                    
                    <div class="col-lg-12">
                        <hr>
                        <h2 class="intro-text text-center">Start <strong>Searching</strong></h2>
                        <hr>
                    </div>
                    
                    <div ng-app="search">
                        <div ng-controller="mainSearch">
                            <div class="col-md-6">
                                <!-- Embedded Google Map using an iframe - to select your location find it on Google maps and paste the link as the iframe src. If you want to use the Google Maps API instead then have at it! -->
                                <img style="max-width: 500px;" ng-src="{{uri}}" />
                            </div>
                            <div class="col-md-6">
                                <div class="alert alert-danger" role="alert">
    <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
    <span class="sr-only">New here?:</span>
    If you are new to the topic, check out the <a href="">guided mode</a>
</div>

                                <p>Is it a clumpy structure? <a style="text-decoration: none; color: black;" href="#" data-toggle="tooltip" title="Here goes some examplanatory description about what a clumpy object is....."><span class="glyphicon glyphicon-question-sign" aria-hidden="true"></a> </p>
                                <form ng-submit="submit()" ng-controller="ExampleController">
                                    <label class="radio-inline">
                                        <input type="radio" name="inlineRadioOptions" id="yes" value="yes"> yes
                                    </label>
                                    <label class="radio-inline">
                                        <input type="radio" name="inlineRadioOptions" id="no" value="no"> no
                                    </label>
                                    <button type="submit" class="btn btn-primary">Send</button>
                                </form>

                            </div>

                            <div class="clearfix"></div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
        <!-- /.container -->

        <footer>
            <div class="container">
                <div class="row">
                    <div class="col-lg-12 text-center">
                        <p><a href="http://www.ifi.uzh.ch/ddis.html">DDIS</a> @ <a href="http://www.uzh.ch">University of Zurich</a> and <a href="mailto:david.pinezich@gmail.com">David Pinezich</a></p>
                    </div>
                </div>
            </div>
        </footer>

        <script>
	        /*
            $(document).ready(function(){
    $('[data-toggle="tooltip"]').tooltip(); 
    
    
    
    function myIP() {
    if (window.XMLHttpRequest) xmlhttp = new XMLHttpRequest();
    else xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");

    xmlhttp.open("GET","http://api.hostip.info/get_html.php",false);
    xmlhttp.send();

    hostipInfo = xmlhttp.responseText.split("\n");

    for (i=0; hostipInfo.length >= i; i++) {
        ipAddress = hostipInfo[i].split(":");
        if ( ipAddress[0] == "IP" ) return ipAddress[1];
    }

    return false;
}
    
});*/

    
  /*
            // Attach a submit handler to the form
            $("#searchform").submit(function(event) {
            var answer = $('input[name=inlineRadioOptions]:checked', '#searchform').val(); 
            alert(answer);
            var data = {uuid: "f4957a2c-921d-4cd0-9634-a9da89c9c3ef", question_id: "1", answer: answer, coordinates_id: "99", ip: myIP()};
            // Stop form from submitting normally
            event.preventDefault();
                    $.ajax({
                    type: 'POST',
                            url: 'http://localhost:9000/tasklog',
                            data: JSON.stringify(data),
                            success: function(data) { alert('data: ' + data);location.reload(); },
                            contentType: "application/json",
                            dataType: 'json'
                            });      
         });   
         */     
         
         </script>
    </body>

</html>